# 快速开始指南

本指南将帮助你快速搭建并运行TEC数据采集系统。

## 第一步：选择方案

### 新手/测试用户 → 单ADS1115方案
- 硬件需求：1个ADS1115 + 2个TEC芯片
- 适合：初期测试、学习I2C通信、验证系统

### 正式使用 → 完整4个ADS1115方案
- 硬件需求：4个ADS1115 + 8个TEC芯片
- 适合：7天连续数据采集、完整项目实施

## 第二步：硬件连线（30分钟）

### 单ADS1115方案
1. 打开文件：`单ADS1115连线方案.md`
2. 按照文档完成Raspberry Pi ↔ ADS1115的4根线连接
3. 完成TEC芯片 ↔ ADS1115的差分连接
4. 验证连线：`sudo i2cdetect -y 1`（应显示地址0x48）

### 完整4个ADS1115方案
1. 打开文件：`完整4ADS1115连线方案.md`
2. 建议使用面包板分配电源和地线
3. 完成4个ADS1115的I2C连接（注意ADDR引脚设置）
4. 完成8个TEC芯片的差分连接
5. 验证连线：`sudo i2cdetect -y 1`（应显示4个地址：48 49 4a 4b）

## 第三步：软件安装（10分钟）

### 启用I2C
```bash
sudo raspi-config
# 选择: 3 - Interface Options → I5 - I2C → Yes
sudo reboot
```

### 安装依赖库
```bash
# 进入项目目录
cd /home/pi/Thermoelectric_Project/DataCollection

# 方法1：使用requirements.txt（推荐）
pip3 install -r requirements.txt

# 方法2：手动安装
pip3 install adafruit-circuitpython-ads1x15
pip3 install adafruit-blinka
```

## 第四步：运行测试（5分钟）

### 单ADS1115方案
```bash
python3 single_ads1115_collector.py
```

预期输出：
```
============================================================
单ADS1115数据采集系统
============================================================
采集间隔: 10秒
数据文件: data.csv
采集通道: TEC1 (A0-A1), TEC2 (A2-A3)
按Ctrl+C停止采集
============================================================
ADS1115初始化成功，地址: 0x48
CSV文件已初始化: data.csv

开始采集数据...

[0001] 2024-11-09 10:15:30
  TEC1: 0.003245 V (   3.245 mV)
  TEC2: 0.002987 V (   2.987 mV)
```

### 完整4个ADS1115方案
```bash
python3 full_4ads1115_collector.py
```

预期输出：
```
================================================================================
完整4个ADS1115数据采集系统
================================================================================
...
ADS1 初始化成功，地址: 0x48
ADS2 初始化成功，地址: 0x49
ADS3 初始化成功，地址: 0x4A
ADS4 初始化成功，地址: 0x4B

开始采集数据...

[0001] 2024-11-09 10:15:30
  TEC1: 0.003245 V (   3.245 mV)  |  TEC2: 0.002987 V (   2.987 mV)
  TEC3: 0.003156 V (   3.156 mV)  |  TEC4: 0.003021 V (   3.021 mV)
  ...
```

按 `Ctrl+C` 停止采集。

## 第五步：查看数据

```bash
# 查看CSV文件前几行
head data.csv

# 或用nano编辑器查看
nano data.csv
```

CSV文件格式：
```csv
Timestamp,DateTime,TEC1_Voltage(V),TEC2_Voltage(V),...
1699876543.123456,2024-11-09 10:15:30,0.003245,0.002987,...
```

## 第六步：长期运行（可选）

如果需要连续7天采集，推荐使用systemd服务：

```bash
# 创建服务文件
sudo nano /etc/systemd/system/tec-collector.service
```

粘贴以下内容（根据你的用户名和路径修改）：
```ini
[Unit]
Description=TEC Data Collector
After=network.target

[Service]
Type=simple
User=pi
WorkingDirectory=/home/pi/Thermoelectric_Project/DataCollection
ExecStart=/usr/bin/python3 full_4ads1115_collector.py
Restart=on-failure
RestartSec=10

[Install]
WantedBy=multi-user.target
```

启动服务：
```bash
sudo systemctl enable tec-collector.service
sudo systemctl start tec-collector.service

# 查看状态
sudo systemctl status tec-collector.service
```

## 常见问题速查

### Q1: 找不到I2C设备
**A**: 检查I2C是否启用、检查VDD/GND/SDA/SCL连线

### Q2: 导入模块失败
**A**: 运行 `pip3 install -r requirements.txt`

### Q3: 电压读数为0
**A**: 检查TEC芯片P/N极性、确认有温差

### Q4: 权限错误
**A**: 运行 `sudo usermod -a -G i2c,gpio pi && sudo reboot`

### Q5: 如何远程开发？
**A**: 使用VSCode的Remote-SSH插件连接到Raspberry Pi

## 下一步

1. ✅ 系统运行正常？继续阅读 `readme.md` 了解更多功能
2. 📊 需要分析数据？参考 `readme.md` 中的数据分析部分
3. 🔧 遇到问题？查看 `readme.md` 中的故障排除章节

## 技巧提示

- **数据备份**: 定期备份data.csv到PC（使用scp或sftp）
- **监控磁盘空间**: `df -h` 检查SD卡剩余空间
- **查看实时数据**: 使用 `tail -f data.csv` 实时查看最新数据
- **停止采集**: 按 `Ctrl+C` 或 `sudo systemctl stop tec-collector.service`

祝你实验顺利！🎉
