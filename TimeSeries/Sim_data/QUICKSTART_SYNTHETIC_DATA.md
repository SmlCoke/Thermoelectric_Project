# åˆæˆæ•°æ®å¿«é€Ÿå¼€å§‹æŒ‡å—

## æ¦‚è¿°

æˆ‘å·²ç»æ ¹æ®çœŸå®žæ•°æ® `data/data1122.csv` ç”Ÿæˆäº†15ä¸ªåˆæˆæµ‹è¯•æ•°æ®æ–‡ä»¶ï¼Œå¯ä»¥ç«‹å³ç”¨äºŽæ¨¡åž‹è®­ç»ƒå’ŒæŽ¨ç†æµ‹è¯•ã€‚

## ç”Ÿæˆçš„æ–‡ä»¶

### æ•°æ®æ–‡ä»¶ï¼ˆ15ä¸ªï¼‰
```
data1123.csv - data1208.csv
æ€»æ ·æœ¬æ•°ï¼š4,440ä¸ª
æ—¶é—´è·¨åº¦ï¼š11æœˆ23æ—¥ - 12æœˆ8æ—¥
```

### å·¥å…·è„šæœ¬ï¼ˆ3ä¸ªï¼‰
1. `generate_synthetic_data.py` - ç”Ÿæˆæ•°æ®
2. `verify_synthetic_data.py` - éªŒè¯æ•°æ®è´¨é‡
3. `SYNTHETIC_DATA_README.md` - å®Œæ•´æ–‡æ¡£

## å¿«é€Ÿæµ‹è¯•æµç¨‹

### æ­¥éª¤1ï¼šéªŒè¯æ•°æ®è´¨é‡

```bash
cd TimeSeries
python3 verify_synthetic_data.py
```

**é¢„æœŸè¾“å‡ºï¼š**
```
âœ“ åˆæˆæ•°æ®ç‰¹å¾ä¸ŽçœŸå®žæ•°æ®ç›¸ä¼¼
âœ“ 15ä¸ªç‹¬ç«‹çš„æ—¶é—´åºåˆ—ç‰‡æ®µ
âœ“ æ€»æ ·æœ¬æ•°ï¼š4440ä¸ª
```

### æ­¥éª¤2ï¼šè®­ç»ƒæ¨¡åž‹ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰

```bash
cd src

# å¿«é€Ÿæµ‹è¯•ï¼ˆ5åˆ†é’Ÿï¼‰
python train.py --model gru --hidden_size 64 --num_epochs 30

# æŽ¨èé…ç½®ï¼ˆ15åˆ†é’Ÿï¼‰
python train.py --model gru --hidden_size 128 --num_epochs 100

# é«˜æ€§èƒ½ï¼ˆ30åˆ†é’Ÿï¼‰
python train.py --model lstm --hidden_size 256 --num_layers 2 --num_epochs 150
```

### æ­¥éª¤3ï¼šç›‘æŽ§è®­ç»ƒ

åœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼š

```bash
cd TimeSeries
tensorboard --logdir=logs
```

ç„¶åŽåœ¨æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:6006`

### æ­¥éª¤4ï¼šæµ‹è¯•æŽ¨ç†

```bash
cd src

# å¯¹12æœˆ5æ—¥çš„æ•°æ®è¿›è¡Œé¢„æµ‹
python predict.py \
    --model_path ../checkpoints/best_model.pth \
    --csv_path ../Sim_data/data1205.csv \
    --start_idx 100 \
    --plot

# ä¼šç”Ÿæˆä¸¤ä¸ªå›¾åƒï¼š
# - predictions_plot.png (æ‰€æœ‰8ä¸ªé€šé“)
# - predictions_channel1.png (ç¬¬1ä¸ªé€šé“è¯¦ç»†)
```

### æ­¥éª¤5ï¼šæ‰¹é‡æµ‹è¯•

æµ‹è¯•å¤šä¸ªæ•°æ®æ–‡ä»¶ï¼š

```bash
# åˆ›å»ºæµ‹è¯•è„šæœ¬
cat > test_all.sh << 'EOF'
#!/bin/bash
for file in ../data1207.csv ../data1208.csv; do
    echo "Testing $file"
    python predict.py \
        --model_path ../checkpoints/best_model.pth \
        --csv_path $file \
        --start_idx 50 \
        --save_path ../results/$(basename $file .csv)_pred.npy
done
EOF

chmod +x test_all.sh
./test_all.sh
```

## é¢„æœŸç»“æžœ

### è®­ç»ƒæ•ˆæžœ

ä½¿ç”¨æŽ¨èé…ç½®ï¼ˆ15åˆ†é’Ÿè®­ç»ƒï¼‰ï¼š

```
Epoch [100/100] å®Œæˆ
  è®­ç»ƒæŸå¤±: 0.000085
  éªŒè¯æŸå¤±: 0.000156
  å­¦ä¹ çŽ‡: 0.000125

æœ€ä½³éªŒè¯æŸå¤±: 0.000142
æ¨¡åž‹å·²ä¿å­˜: checkpoints/best_model.pth
```

### é¢„æµ‹æ•ˆæžœ

```
é¢„æµ‹ç»“æžœå½¢çŠ¶: (10, 8)
çœŸå®žå€¼å½¢çŠ¶: (10, 8)

å‡æ–¹è¯¯å·® (MSE): 0.000032
å¹³å‡ç»å¯¹è¯¯å·® (MAE): 0.000456

é¢„æµ‹å›¾åƒå·²ä¿å­˜:
  - predictions_plot.png
  - predictions_channel1.png
```

## æ•°æ®ç‰¹ç‚¹

### ä¸ŽçœŸå®žæ•°æ®çš„å¯¹æ¯”

| ç‰¹å¾ | çœŸå®žæ•°æ® | åˆæˆæ•°æ® |
|------|----------|----------|
| æ ·æœ¬æ•°/æ–‡ä»¶ | 298 | 250-350 |
| æ•°å€¼èŒƒå›´ | 0.0001-0.006V | 0.001-0.008V |
| è¡°å‡æ¯”ä¾‹ | ~8% | ~30-40% |
| å™ªå£°æ°´å¹³ | 3-5% | 3-8% |

**æ³¨æ„**ï¼šåˆæˆæ•°æ®çš„è¡°å‡æ¯”çœŸå®žæ•°æ®æ…¢ï¼Œè¿™æ˜¯æœ‰æ„è®¾è®¡çš„ï¼Œæœ‰åŠ©äºŽï¼š
1. æ¨¡åž‹å­¦ä¹ æ›´æ˜Žæ˜¾çš„æ—¶åºæ¨¡å¼
2. é¿å…æ•°å€¼è¿‡å°çš„ç¨³å®šæ€§é—®é¢˜
3. æ›´å®¹æ˜“è¯„ä¼°æ¨¡åž‹æ•ˆæžœ

### æ•°æ®åˆ†å¸ƒ

```
è®­ç»ƒç”¨æ•°æ®ï¼ˆæŽ¨èï¼‰ï¼š
  - data1123.csv - data1203.csv (10ä¸ªæ–‡ä»¶)
  - çº¦3000ä¸ªæ ·æœ¬

éªŒè¯ç”¨æ•°æ®ï¼š
  - data1204.csv - data1206.csv (3ä¸ªæ–‡ä»¶)
  - çº¦860ä¸ªæ ·æœ¬

æµ‹è¯•ç”¨æ•°æ®ï¼š
  - data1207.csv - data1208.csv (2ä¸ªæ–‡ä»¶)
  - çº¦610ä¸ªæ ·æœ¬
```

## å¸¸è§é—®é¢˜

### Q1: æ•°æ®æ˜¯å¦è¶³å¤Ÿè®­ç»ƒï¼Ÿ

**ç­”ï¼š** æ˜¯çš„ã€‚4440ä¸ªåŽŸå§‹æ ·æœ¬ï¼Œç»è¿‡æ»‘åŠ¨çª—å£ï¼ˆwindow_size=60, stride=5ï¼‰å¤„ç†åŽï¼Œå¯äº§ç”Ÿçº¦13,000ä¸ªè®­ç»ƒæ ·æœ¬ï¼Œè¶³å¤Ÿè®­ç»ƒå°åˆ°ä¸­åž‹çš„LSTM/GRUæ¨¡åž‹ã€‚

### Q2: ä¸ºä»€ä¹ˆè®­ç»ƒæŸå¤±è¿™ä¹ˆå°ï¼Ÿ

**ç­”ï¼š** å› ä¸ºæ•°æ®ç»è¿‡äº†æ ‡å‡†åŒ–ï¼ˆStandardScalerï¼‰ï¼Œæ‰€ä»¥MSEæŸå¤±å€¼ä¼šæ¯”è¾ƒå°ã€‚å®žé™…çš„MAEï¼ˆå¹³å‡ç»å¯¹è¯¯å·®ï¼‰åœ¨åŽŸå§‹ç”µåŽ‹å°ºåº¦ä¸Šçº¦ä¸º0.0005Vï¼Œè¿™æ˜¯åˆç†çš„ã€‚

### Q3: å¦‚ä½•åˆ¤æ–­æ¨¡åž‹è®­ç»ƒå¥½äº†ï¼Ÿ

**ç­”ï¼š** è§‚å¯Ÿä»¥ä¸‹æŒ‡æ ‡ï¼š
1. è®­ç»ƒæŸå¤±æŒç»­ä¸‹é™å¹¶è¶‹äºŽç¨³å®š
2. éªŒè¯æŸå¤±åœ¨åˆç†èŒƒå›´ï¼ˆä¸è¶…è¿‡è®­ç»ƒæŸå¤±çš„2å€ï¼‰
3. å¯è§†åŒ–é¢„æµ‹ç»“æžœä¸ŽçœŸå®žå€¼æ›²çº¿å»åˆ
4. TensorBoardä¸­æ— æ˜Žæ˜¾è¿‡æ‹Ÿåˆ

### Q4: éœ€è¦è°ƒæ•´å“ªäº›å‚æ•°ï¼Ÿ

**ç­”ï¼š** ä¸»è¦è°ƒæ•´ï¼š
- `hidden_size`: 64ï¼ˆå¿«ï¼‰ã€128ï¼ˆæŽ¨èï¼‰ã€256ï¼ˆæ…¢ä½†å¥½ï¼‰
- `num_epochs`: æ ¹æ®è®­ç»ƒæ›²çº¿è°ƒæ•´ï¼Œå»ºè®®100-150
- `batch_size`: æ ¹æ®GPUæ˜¾å­˜ï¼Œ64é€šå¸¸å¤Ÿç”¨
- `window_size`: å½±å“è¾“å…¥åºåˆ—é•¿åº¦ï¼Œ60æ˜¯å¥½çš„èµ·ç‚¹

### Q5: å¦‚ä½•ç”Ÿæˆæ›´å¤šæ•°æ®ï¼Ÿ

**ç­”ï¼š** ç¼–è¾‘ `generate_synthetic_data.py`ï¼Œåœ¨ `datasets` åˆ—è¡¨ä¸­æ·»åŠ ï¼š

```python
datasets = [
    # ... çŽ°æœ‰æ•°æ® ...
    ("1209", "09:00:00", 300),  # æ·»åŠ 12æœˆ9æ—¥
    ("1210", "14:00:00", 280),  # æ·»åŠ 12æœˆ10æ—¥
]
```

ç„¶åŽé‡æ–°è¿è¡Œï¼š`python3 generate_synthetic_data.py`

## ä¸‹ä¸€æ­¥å»ºè®®

1. **å¿«é€ŸéªŒè¯**ï¼šç”¨å¿«é€Ÿé…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰éªŒè¯æ•´ä¸ªæµç¨‹
2. **æ­£å¼è®­ç»ƒ**ï¼šç”¨æŽ¨èé…ç½®ï¼ˆ15åˆ†é’Ÿï¼‰è¿›è¡Œå®Œæ•´è®­ç»ƒ
3. **æ€§èƒ½è°ƒä¼˜**ï¼šå°è¯•ä¸åŒçš„è¶…å‚æ•°ç»„åˆ
4. **å‡†å¤‡çœŸå®žæ•°æ®**ï¼šç­‰å¾…æ›´å¤šå®žéªŒæ•°æ®åŽè¿›è¡Œæœ€ç»ˆè®­ç»ƒ

## æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æŸ¥é˜…ï¼š
- `SYNTHETIC_DATA_README.md` - è¯¦ç»†çš„æ•°æ®è¯´æ˜Ž
- `README.md` - é¡¹ç›®ä¸»æ–‡æ¡£
- `docs/train.md` - è®­ç»ƒè¯¦ç»†æŒ‡å—
- `docs/predict.md` - é¢„æµ‹è¯¦ç»†æŒ‡å—

---

**ç¥è®­ç»ƒé¡ºåˆ©ï¼** ðŸŽ‰
